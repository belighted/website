lang: "en"
slug: "figaro"
originalPath: "https://www.belighted.com/blog/figaro"
article:
  title: "Figaro gem - Simple, Heroku-friendly Rails app configuration using ENV and a single YAML file"
  content: "<span id=\"hs_cos_wrapper_post_body\" class=\"hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text\" data-hs-cos-general-type=\"meta_field\" data-hs-cos-type=\"rich_text\"><p><img src=\"https://github-camo.global.ssl.fastly.net/5172f94b51071b7f0164beb8a7dc5e9d371fd150/687474703a2f2f696d61676573322e77696b69612e6e6f636f6f6b69652e6e65742f5f5f636232303130303632383139323732322f6469736e65792f696d616765732f352f35332f50696e6f636368696f2d70696e6f636368696f2d343934373839302d3936302d3732302e6a7067\" alt=\"\"></p>\n<p>Even if you’re kind enough to offer your hard work to the community (as a just reward for all the pretty gems we use every day), it quickly comes to your mind that some parts of your credentials need to be kept private (even for an open source project). These risks can be avoided by setting ENV variables (key/value) on your local environment and calling them in your code.</p>\n<!--more-->\n<figure class=\"code\">\n<figcaption><span>config/initializers/credentials.rb </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"ruby\"><span class=\"line\"><span class=\"no\"><span class=\"constant\">MyApp</span></span><span class=\"o\">.</span><span class=\"n\">app_id</span> <span class=\"o\">=</span> <span class=\"no\"><span class=\"constant\">ENV</span></span><span class=\"o\">[</span><span class=\"s2\"><span class=\"string\">\"MY_APP_ID\"</span></span><span class=\"o\">]</span>\n</span><span class=\"line\"><span class=\"no\"><span class=\"constant\">MyApp</span></span><span class=\"o\">.</span><span class=\"n\">key</span> <span class=\"o\">=</span> <span class=\"no\"><span class=\"constant\">ENV</span></span><span class=\"o\">[</span><span class=\"s2\"><span class=\"string\">\"MY_APP_KEY\"</span></span><span class=\"o\">]</span>\n</span><span class=\"line\"><span class=\"no\"><span class=\"constant\">MyApp</span></span><span class=\"o\">.</span><span class=\"n\">secret</span> <span class=\"o\">=</span> <span class=\"no\"><span class=\"constant\">ENV</span></span><span class=\"o\">[</span><span class=\"s2\"><span class=\"string\">\"MY_APP_SECRET\"</span></span><span class=\"o\">]</span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<p>As an alternative, that could furthermore allow you to set environment specific variables, comes the figaro gem.</p>\n<p>Simply add <code>gem \"figaro\"</code> to your gemfile and run the <code>bundle install</code> command.</p>\n<p>Next step is to launch <code>rails generate figaro:install</code> which will create the <code>config/application.yml</code> file and add it into your <code>.gitignore</code>.</p>\n<p>You don’t even need to update your initialization file, the gem handle the ENV variable creation and as mentioned earlier in this post, you can now specify some values according to the environment.</p>\n<figure class=\"code\">\n<figcaption><span>config/application.yml </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"yaml undefined\"><span class=\"line\"><span class=\"l-Scalar-Plain\">MY_APP_ID</span><span class=\"p-Indicator\">:</span> <span class=\"l-Scalar-Plain\">111111</span>\n</span><span class=\"line\"><span class=\"l-Scalar-Plain\">development</span><span class=\"p-Indicator\">:</span>\n</span><span class=\"line\"> <span class=\"l-Scalar-Plain\">MY_APP_ID</span><span class=\"p-Indicator\">:</span> <span class=\"l-Scalar-Plain\">222222</span>\n</span><span class=\"line\"><span class=\"l-Scalar-Plain\">staging</span><span class=\"p-Indicator\">:</span>\n</span><span class=\"line\"> <span class=\"l-Scalar-Plain\">MY_APP_ID</span><span class=\"p-Indicator\">:</span> <span class=\"l-Scalar-Plain\">333333</span>\n</span><span class=\"line\"><span class=\"l-Scalar-Plain\">production</span><span class=\"p-Indicator\">:</span>\n</span><span class=\"line\"> <span class=\"l-Scalar-Plain\">MY_APP_ID</span><span class=\"p-Indicator\">:</span> <span class=\"l-Scalar-Plain\">444444</span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n\n<p>Either with capistrano:</p>\n<p>And then you should consider adding something like this into your <code>deploy.rb</code> script:</p>\n<figure class=\"code\">\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"ruby\"><span class=\"line\"><span class=\"n\">namespace</span> <span class=\"ss\"><span class=\"symbol\">:deploy</span></span> <span class=\"k\"><span class=\"keyword\">do</span></span>\n</span><span class=\"line\"> <span class=\"n\">desc</span> <span class=\"s1\"><span class=\"string\">'Symlink shared directories and files'</span></span>\n</span><span class=\"line\"> <span class=\"n\">task</span> <span class=\"ss\"><span class=\"symbol\">:symlink_directories_and_files</span></span> <span class=\"k\"><span class=\"keyword\">do</span></span>\n</span><span class=\"line\"> <span class=\"n\">run</span> <span class=\"s2\"><span class=\"string\">\"ln -s </span></span><span class=\"string\"><span class=\"si\"><span class=\"subst\">#{</span></span><span class=\"subst\"><span class=\"n\">shared_path</span><span class=\"si\">}</span></span><span class=\"si\"></span><span class=\"s2\">/config/application.yml </span><span class=\"si\"><span class=\"subst\">#{</span></span><span class=\"subst\"><span class=\"n\">release_path</span><span class=\"si\">}</span></span><span class=\"si\"></span><span class=\"s2\">/config/application.yml\"</span></span><span class=\"s2\"></span>\n</span><span class=\"line\"> <span class=\"k\"><span class=\"keyword\">end</span></span>\n</span><span class=\"line\"><span class=\"k\"><span class=\"keyword\">end</span></span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<p>Or, if you’re using platform like Heroku, the gem includes a nice Rake task which allows you to set all the needed ENV variables:</p>\n<p><code>rake figaro:heroku</code></p>\n<p>For further information:</p>\n\n<p><!--HubSpot Call-to-Action Code --><span class=\"hs-cta-wrapper\" id=\"hs-cta-wrapper-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\"><span class=\"hs-cta-node hs-cta-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\" id=\"hs-cta-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\"><!--[if lte IE 8]><div id=\"hs-cta-ie-element\"></div><![endif]--><a href=\"https://cta-redirect.hubspot.com/cta/redirect/1684659/fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\" target=\"_blank\"><img class=\"hs-cta-img\" id=\"hs-cta-img-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\" src=\"https://no-cache.hubspot.com/cta/default/1684659/fb3606cc-cc1b-47d0-ae85-2c9f69837fe2.png\" alt=\"New Call-to-action\"></a></span></span><!-- end HubSpot Call-to-Action Code --></p>\n</span>"
  textBody: ""
  html: "<!--<![endif]--><head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <meta name=\"author\" content=\"Stéphane A.\">\n    <meta name=\"description\" content=\"An overview of the figaro gem, a library tailored to handle app variables configuration on many deployment platforms including heroku.\">\n    <meta name=\"generator\" content=\"HubSpot\">\n    <title>Figaro gem - Simple, Heroku-friendly Rails app configuration using ENV and a single YAML file</title>\n    <link rel=\"shortcut icon\" href=\"https://www.belighted.com/hubfs/logo-belighted.png\">\n    \n\n    \n\n    <meta property=\"og:description\" content=\"An overview of the figaro gem, a library tailored to handle app variables configuration on many deployment platforms including heroku.\">\n    <meta property=\"og:title\" content=\"Figaro gem - Simple, Heroku-friendly Rails app configuration using ENV and a single YAML file\">\n    <meta name=\"twitter:description\" content=\"An overview of the figaro gem, a library tailored to handle app variables configuration on many deployment platforms including heroku.\">\n    <meta name=\"twitter:title\" content=\"Figaro gem - Simple, Heroku-friendly Rails app configuration using ENV and a single YAML file\">\n\n\n    <style>\na.cta_button{-moz-box-sizing:content-box !important;-webkit-box-sizing:content-box !important;box-sizing:content-box !important;vertical-align:middle}.hs-breadcrumb-menu{list-style-type:none;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px}.hs-breadcrumb-menu-item{float:left;padding:10px 0px 10px 10px}.hs-breadcrumb-menu-divider:before{content:'›';padding-left:10px}.hs-featured-image-link{border:0}.hs-featured-image{float:right;margin:0 0 20px 20px;max-width:50%}@media (max-width: 568px){.hs-featured-image{float:none;margin:0;width:100%;max-width:100%}}.hs-screen-reader-text{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px}\n</style>\n\n<link rel=\"stylesheet\" href=\"/hs/hsstatic/AsyncSupport/static-1.70/sass/comments_listing_asset.css\">\n<link rel=\"stylesheet\" href=\"/hs/hsstatic/AsyncSupport/static-1.70/sass/rss_post_listing.css\">\n    \n\n    \n    \n\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n\n<!-- Facebook Pixel Code -->\n\n<noscript>&lt;img  height=\"1\" width=\"1\" style=\"display:none\" src=\"https://www.facebook.com/tr?id=706355809571598&amp;amp;ev=PageView&amp;amp;noscript=1\"&gt;</noscript>\n<!-- End Facebook Pixel Code -->\n<link rel=\"amphtml\" href=\"https://www.belighted.com/blog/figaro?hs_amp=true\">\n\n<meta property=\"og:image\" content=\"https://belighted.com/images/default_blogpost_image_2@1x.jpg#keepProtocol\">\n\n<meta name=\"twitter:image\" content=\"https://belighted.com/images/default_blogpost_image_2@1x.jpg#keepProtocol\">\n\n\n<meta property=\"og:url\" content=\"https://www.belighted.com/blog/figaro\">\n<meta name=\"twitter:card\" content=\"summary\">\n\n<link rel=\"canonical\" href=\"https://www.belighted.com/blog/figaro\">\n\n<meta property=\"og:type\" content=\"article\">\n<link rel=\"alternate\" type=\"application/rss+xml\" href=\"https://www.belighted.com/blog/rss.xml\">\n<meta name=\"twitter:domain\" content=\"www.belighted.com\">\n\n\n<meta http-equiv=\"content-language\" content=\"en\">\n<link rel=\"stylesheet\" href=\"//cdn2.hubspot.net/hub/-1/hub_generated/template_assets/1495141902003/hubspot_default/shared/responsive/layout.min.css\">\n\n\n<link rel=\"stylesheet\" href=\"https://www.belighted.com/hs-fs/hub/1684659/hub_generated/template_assets/8523445462/1569881984337/Marketplace/Neambo/Act21/Coded_Files/Act21.min.css\">\n\n\n\n\n</head>\n<body class=\"blog-1 featured-image-right   hs-content-id-4792078282 hs-blog-post hs-blog-id-4544204069\" style=\"\"></body>"

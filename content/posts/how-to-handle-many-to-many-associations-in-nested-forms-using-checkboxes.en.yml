lang: "en"
slug: "how-to-handle-many-to-many-associations-in-nested-forms-using-checkboxes"
originalPath: "https://www.belighted.com/blog/how-to-handle-many-to-many-associations-in-nested-forms-using-checkboxes"
article:
  title: "How to handle many to many associations in nested forms using checkboxes !"
  content: "<span id=\"hs_cos_wrapper_post_body\" class=\"hs_cos_wrapper hs_cos_wrapper_meta_field hs_cos_wrapper_type_rich_text\" data-hs-cos-general-type=\"meta_field\" data-hs-cos-type=\"rich_text\"><p>As everybody know thanks to one of the first awesome Ryan Batesâ€™ railscasts (see <a href=\"http://railscasts.com/episodes/17-habtm-checkboxes\">http://railscasts.com/episodes/17-habtm-checkboxes</a> or the revised one <a href=\"http://railscasts.com/episodes/17-habtm-checkboxes-revised\">http://railscasts.com/episodes/17-habtm-checkboxes-revised</a> ), you can easily deal with many to many relations using check_box_tags.</p>\n<!--more-->\n<p>For instance, if we have books and categories, here is the code you could obtain!</p>\n<p>The classes:</p>\n<figure class=\"code\">\n<figcaption><span>book.rb </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"ruby\"><span class=\"line\"><span class=\"k\"><span class=\"class\"><span class=\"keyword\">class</span></span></span><span class=\"class\"> <span class=\"nc\"><span class=\"title\">Book</span></span> <span class=\"o\"><span class=\"inheritance\">&lt;</span></span><span class=\"inheritance\"> <span class=\"no\"><span class=\"parent\">ActiveRecord</span></span><span class=\"parent\"><span class=\"o\">::</span><span class=\"no\">Base</span></span><span class=\"no\"></span></span><span class=\"no\"></span></span><span class=\"no\"></span>\n</span><span class=\"line\">\n</span><span class=\"line\"> <span class=\"n\">has_many</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:dependent</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:destroy</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:autosave</span></span> <span class=\"o\">=&gt;</span> <span class=\"kp\"><span class=\"keyword\">true</span></span> <span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:inverse_of</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:book</span></span>\n</span><span class=\"line\"> <span class=\"n\">accepts_nested_attributes_for</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:allow_destroy</span></span> <span class=\"o\">=&gt;</span> <span class=\"kp\"><span class=\"keyword\">true</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:reject_if</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:all_blank</span></span>\n</span><span class=\"line\"> <span class=\"n\">has_many</span> <span class=\"ss\"><span class=\"symbol\">:categories</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:through</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"k\"><span class=\"keyword\">end</span></span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<figure class=\"code\">\n<figcaption><span>category.rb </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"ruby\"><span class=\"line\"><span class=\"k\"><span class=\"class\"><span class=\"keyword\">class</span></span></span><span class=\"class\"> <span class=\"nc\"><span class=\"title\">Category</span></span> <span class=\"o\"><span class=\"inheritance\">&lt;</span></span><span class=\"inheritance\"> <span class=\"no\"><span class=\"parent\">ActiveRecord</span></span><span class=\"parent\"><span class=\"o\">::</span><span class=\"no\">Base</span></span><span class=\"no\"></span></span><span class=\"no\"></span></span><span class=\"no\"></span>\n</span><span class=\"line\">\n</span><span class=\"line\"> <span class=\"n\">has_many</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:dependent</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:destroy</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:autosave</span></span> <span class=\"o\">=&gt;</span> <span class=\"kp\"><span class=\"keyword\">true</span></span> <span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:inverse_of</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:category</span></span>\n</span><span class=\"line\"> <span class=\"n\">accepts_nested_attributes_for</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:allow_destroy</span></span> <span class=\"o\">=&gt;</span> <span class=\"kp\"><span class=\"keyword\">true</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:reject_if</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:all_blank</span></span>\n</span><span class=\"line\"> <span class=\"n\">has_many</span> <span class=\"ss\"><span class=\"symbol\">:books</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:through</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"k\"><span class=\"keyword\">end</span></span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<figure class=\"code\">\n<figcaption><span>classification.rb </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"ruby\"><span class=\"line\"><span class=\"k\"><span class=\"class\"><span class=\"keyword\">class</span></span></span><span class=\"class\"> <span class=\"nc\"><span class=\"title\">Classification</span></span> <span class=\"o\"><span class=\"inheritance\">&lt;</span></span><span class=\"inheritance\"> <span class=\"no\"><span class=\"parent\">ActiveRecord</span></span><span class=\"parent\"><span class=\"o\">::</span><span class=\"no\">Base</span></span><span class=\"no\"></span></span><span class=\"no\"></span></span><span class=\"no\"></span>\n</span><span class=\"line\">\n</span><span class=\"line\"> <span class=\"n\">belongs_to</span> <span class=\"ss\"><span class=\"symbol\">:category</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:inverse_of</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span>\n</span><span class=\"line\"> <span class=\"n\">belongs_to</span> <span class=\"ss\"><span class=\"symbol\">:book</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:inverse_of</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:classifications</span></span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"k\"><span class=\"keyword\">end</span></span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<p>And the form:</p>\n<figure class=\"code\">\n<figcaption><span>new.html.erb </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"erb undefined\"><span class=\"line\"><span class=\"cp\">&lt;%=</span> <span class=\"n\">form_for</span> <span class=\"vi\">@book</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">f</span><span class=\"o\">|</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"x\"> &lt;p&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">label</span> <span class=\"ss\">:name</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">text_field</span> <span class=\"ss\">:name</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;/p&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"x\"> &lt;p&gt;Categories&lt;/p&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> &lt;ul&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%</span> <span class=\"vi\">@categories</span><span class=\"o\">.</span><span class=\"n\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">cat</span><span class=\"o\">|</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">hidden_field_tag</span> <span class=\"s2\">\"book_category_ids_none\"</span><span class=\"p\">,</span> <span class=\"kp\">nil</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"ss\">:name</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"book[category_ids][]\"</span><span class=\"p\">}</span><span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;li&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">check_box_tag</span> <span class=\"s2\">\"book_category_ids_</span><span class=\"si\">#{</span><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">,</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"o\">.</span><span class=\"n\">categories</span><span class=\"o\">.</span><span class=\"n\">present?</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"o\">.</span><span class=\"n\">categories</span><span class=\"o\">.</span><span class=\"n\">include?</span><span class=\"p\">(</span><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">)),</span> <span class=\"p\">{</span><span class=\"ss\">:name</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"book[category_ids][]\"</span><span class=\"p\">}</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">label_tag</span> <span class=\"s2\">\"book_category_ids_</span><span class=\"si\">#{</span><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">,</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;/li&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%</span> <span class=\"k\">end</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;/ul&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">submit</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"cp\">&lt;%</span> <span class=\"k\">end</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<p>But now, how to handle this if we introduce the new concept of library. And furthermore, if you need to had books with all these linked categories directly from the library creation or edition form.</p>\n<p>Youâ€™ll need to use a unique reference to identify these nested objects, a convenient way exists to solve this problem.</p>\n<p>First, install the cocoon gem (All detailed information are available here <a href=\"https://github.com/nathanvda/cocoon\">https://github.com/nathanvda/cocoon</a>)</p>\n<p>Then, here is the new library class and the partial form used with cocoon</p>\n<figure class=\"code\">\n<figcaption><span>classification.rb </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"ruby\"><span class=\"line\"><span class=\"k\"><span class=\"class\"><span class=\"keyword\">class</span></span></span><span class=\"class\"> <span class=\"nc\"><span class=\"title\">Library</span></span> <span class=\"o\"><span class=\"inheritance\">&lt;</span></span><span class=\"inheritance\"> <span class=\"no\"><span class=\"parent\">ActiveRecord</span></span><span class=\"parent\"><span class=\"o\">::</span><span class=\"no\">Base</span></span><span class=\"no\"></span></span><span class=\"no\"></span></span><span class=\"no\"></span>\n</span><span class=\"line\">\n</span><span class=\"line\"> <span class=\"n\">has_many</span> <span class=\"ss\"><span class=\"symbol\">:books</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:dependent</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:destroy</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:autosave</span></span> <span class=\"o\">=&gt;</span> <span class=\"kp\"><span class=\"keyword\">true</span></span> <span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:inverse_of</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:library</span></span>\n</span><span class=\"line\"> <span class=\"n\">accepts_nested_attributes_for</span> <span class=\"ss\"><span class=\"symbol\">:books</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:allow_destroy</span></span> <span class=\"o\">=&gt;</span> <span class=\"kp\"><span class=\"keyword\">true</span></span><span class=\"p\">,</span> <span class=\"ss\"><span class=\"symbol\">:reject_if</span></span> <span class=\"o\">=&gt;</span> <span class=\"ss\"><span class=\"symbol\">:all_blank</span></span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"k\"><span class=\"keyword\">end</span></span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<figure class=\"code\">\n<figcaption><span>_book_fields.html.erb </span></figcaption>\n<div class=\"highlight\"><span>\n</span><table>\n<tbody>\n<tr>\n<td class=\"gutter\">\n<pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n</pre>\n</td>\n<td class=\"code\">\n<pre><code class=\"erb undefined\"><span class=\"line\"><span class=\"x\">&lt;div&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> &lt;h3&gt;Book&lt;/h3&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"x\"> &lt;p&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">label</span> <span class=\"ss\">:name</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">text_field</span> <span class=\"ss\">:name</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;p&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"x\"> &lt;p&gt;Categories&lt;/p&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> &lt;ul&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%</span> <span class=\"vi\">@categories</span><span class=\"o\">.</span><span class=\"n\">each</span> <span class=\"k\">do</span> <span class=\"o\">|</span><span class=\"n\">cat</span><span class=\"o\">|</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">hidden_field_tag</span> <span class=\"s2\">\"</span><span class=\"si\">#{</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object_name</span><span class=\"si\">}</span><span class=\"s2\">_category_ids_none\"</span><span class=\"p\">,</span> <span class=\"kp\">nil</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"ss\">:name</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"</span><span class=\"si\">#{</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object_name</span><span class=\"si\">}</span><span class=\"s2\">[category_ids][]\"</span><span class=\"p\">}</span><span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;li&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">check_box_tag</span> <span class=\"s2\">\"</span><span class=\"si\">#{</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object_name</span><span class=\"si\">}</span><span class=\"s2\">_category_ids_</span><span class=\"si\">#{</span><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">,</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"o\">.</span><span class=\"n\">categories</span><span class=\"o\">.</span><span class=\"n\">present?</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object</span><span class=\"o\">.</span><span class=\"n\">categories</span><span class=\"o\">.</span><span class=\"n\">include?</span><span class=\"p\">(</span><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"p\">)),</span> <span class=\"p\">{</span><span class=\"ss\">:name</span> <span class=\"o\">=&gt;</span> <span class=\"s2\">\"</span><span class=\"si\">#{</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object_name</span><span class=\"si\">}</span><span class=\"s2\">[category_ids][]\"</span><span class=\"p\">}</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">label_tag</span> <span class=\"s2\">\"</span><span class=\"si\">#{</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">object_name</span><span class=\"si\">}</span><span class=\"s2\">_category_ids_</span><span class=\"si\">#{</span><span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">id</span><span class=\"si\">}</span><span class=\"s2\">\"</span><span class=\"p\">,</span> <span class=\"n\">cat</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;/li&gt;</span>\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%</span> <span class=\"k\">end</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\"> &lt;/ul&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"x\"> </span><span class=\"cp\">&lt;%=</span> <span class=\"n\">link_to_remove_association</span> <span class=\"s2\">\"Remove book\"</span><span class=\"p\">,</span> <span class=\"n\">f</span> <span class=\"cp\">%&gt;</span><span class=\"x\"></span>\n</span><span class=\"line\"><span class=\"x\">&lt;/div&gt;</span>\n</span></code></pre>\n</td>\n</tr>\n</tbody>\n</table><span>\n</span></div>\n</figure>\n<p>As you can see the method object_name give you the complete name of the newly instanciated object requested by the form. The same way, the method object_id could give you only the id of this object.<br><!--HubSpot Call-to-Action Code --><span class=\"hs-cta-wrapper\" id=\"hs-cta-wrapper-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\"><span class=\"hs-cta-node hs-cta-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\" id=\"hs-cta-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\"><!--[if lte IE 8]><div id=\"hs-cta-ie-element\"></div><![endif]--><a href=\"https://cta-redirect.hubspot.com/cta/redirect/1684659/fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\" target=\"_blank\"><img class=\"hs-cta-img\" id=\"hs-cta-img-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2\" src=\"https://no-cache.hubspot.com/cta/default/1684659/fb3606cc-cc1b-47d0-ae85-2c9f69837fe2.png\" alt=\"New Call-to-action\"></a></span></span><!-- end HubSpot Call-to-Action Code --></p>\n</span>"
  textBody: ""
  html: "<!--<![endif]--><head>\n    <meta charset=\"utf-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n    <meta name=\"author\" content=\"StÃ©phane A.\">\n    <meta name=\"description\" content=\"How can you deal with many to many relations using check boxes.? Find out more of it in this post.\">\n    <meta name=\"generator\" content=\"HubSpot\">\n    <title>How to handle many to many associations in nested forms using checkboxes !</title>\n    <link rel=\"shortcut icon\" href=\"https://www.belighted.com/hubfs/logo-belighted.png\">\n    \n\n    \n\n    <meta property=\"og:description\" content=\"How can you deal with many to many relations using check boxes.? Find out more of it in this post.\">\n    <meta property=\"og:title\" content=\"How to handle many to many associations in nested forms using checkboxes !\">\n    <meta name=\"twitter:description\" content=\"How can you deal with many to many relations using check boxes.? Find out more of it in this post.\">\n    <meta name=\"twitter:title\" content=\"How to handle many to many associations in nested forms using checkboxes !\">\n\n\n    <style>\na.cta_button{-moz-box-sizing:content-box !important;-webkit-box-sizing:content-box !important;box-sizing:content-box !important;vertical-align:middle}.hs-breadcrumb-menu{list-style-type:none;margin:0px 0px 0px 0px;padding:0px 0px 0px 0px}.hs-breadcrumb-menu-item{float:left;padding:10px 0px 10px 10px}.hs-breadcrumb-menu-divider:before{content:'â€º';padding-left:10px}.hs-featured-image-link{border:0}.hs-featured-image{float:right;margin:0 0 20px 20px;max-width:50%}@media (max-width: 568px){.hs-featured-image{float:none;margin:0;width:100%;max-width:100%}}.hs-screen-reader-text{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px}\n</style>\n\n<link rel=\"stylesheet\" href=\"/hs/hsstatic/AsyncSupport/static-1.70/sass/comments_listing_asset.css\">\n<link rel=\"stylesheet\" href=\"/hs/hsstatic/AsyncSupport/static-1.70/sass/rss_post_listing.css\">\n    \n\n    \n    \n\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n\n<!-- Facebook Pixel Code -->\n\n<noscript>&lt;img  height=\"1\" width=\"1\" style=\"display:none\" src=\"https://www.facebook.com/tr?id=706355809571598&amp;amp;ev=PageView&amp;amp;noscript=1\"&gt;</noscript>\n<!-- End Facebook Pixel Code -->\n<link rel=\"amphtml\" href=\"https://www.belighted.com/blog/how-to-handle-many-to-many-associations-in-nested-forms-using-checkboxes?hs_amp=true\">\n\n<meta property=\"og:image\" content=\"http://belighted.com/images/default_blogpost_image_3@1x.jpg#keepProtocol\">\n\n<meta name=\"twitter:image\" content=\"http://belighted.com/images/default_blogpost_image_3@1x.jpg#keepProtocol\">\n\n\n<meta property=\"og:url\" content=\"https://www.belighted.com/blog/how-to-handle-many-to-many-associations-in-nested-forms-using-checkboxes\">\n<meta name=\"twitter:card\" content=\"summary\">\n\n<link rel=\"canonical\" href=\"https://www.belighted.com/blog/how-to-handle-many-to-many-associations-in-nested-forms-using-checkboxes\">\n\n<meta property=\"og:type\" content=\"article\">\n<link rel=\"alternate\" type=\"application/rss+xml\" href=\"https://www.belighted.com/blog/rss.xml\">\n<meta name=\"twitter:domain\" content=\"www.belighted.com\">\n\n\n<meta http-equiv=\"content-language\" content=\"en\">\n<link rel=\"stylesheet\" href=\"//cdn2.hubspot.net/hub/-1/hub_generated/template_assets/1495141902003/hubspot_default/shared/responsive/layout.min.css\">\n\n\n<link rel=\"stylesheet\" href=\"https://www.belighted.com/hs-fs/hub/1684659/hub_generated/template_assets/8523445462/1569881984337/Marketplace/Neambo/Act21/Coded_Files/Act21.min.css\">\n\n\n\n\n</head>\n<body class=\"blog-1 featured-image-right   hs-content-id-4747370653 hs-blog-post hs-blog-id-4544204069\" style=\"\"></body>"

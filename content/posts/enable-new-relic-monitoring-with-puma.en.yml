lang: en
slug: enable-new-relic-monitoring-with-puma
originalPath: https://www.belighted.com/blog/enable-new-relic-monitoring-with-puma
title: Enable New Relic monitoring with Puma
author: Kévin V.
description: Today we tried out Puma for you. This resulted in different
  feedbacks that are published in this post.
image: default_blogpost_image_0@1x.jpg
date: 1356998400000
body: >-
  <p>Today I wanted to try out Puma on a Heroku project. Works great, but I
  quickly realized my app wasn’t reporting to New Relic, which is kind of a
  bummer. Here’s a compilation of what I found to be working with the latest
  version, 1.6.2 at the time of writing.</p>

  <!--more-->

  <h3>1. Add an environment variable.</h3>

  <figure class="code">

  <div class="highlight">

  <table>

  <tbody>

  <tr>

  <td class="gutter">

  <pre class="line-numbers"><span class="line-number">1</span>

  </pre>

  </td>

  <td class="code">

  <pre><code class="ruby"><span class="line"><span class="no"><span class="constant">NEWRELIC_DISPATCHER</span></span><span class="o">=</span><span class="n">puma</span>

  </span></code></pre>

  </td>

  </tr>

  </tbody>

  </table>

  </div>

  </figure>

  <p>Or, if you use something like <a href="https://github.com/laserlemon/figaro">Figaro</a>, just add the following to your <code>application.yml</code>, and run the <code>rake figaro:heroku</code> task.</p>

  <figure class="code">

  <div class="highlight">

  <table>

  <tbody>

  <tr>

  <td class="gutter">

  <pre class="line-numbers"><span class="line-number">1</span>

  </pre>

  </td>

  <td class="code">

  <pre><code class="ruby"><span class="line"><span class="no"><span class="constant">NEWRELIC_DISPATCHER</span></span><span class="p"><span class="symbol">:</span></span> <span class="n">puma</span>

  </span></code></pre>

  </td>

  </tr>

  </tbody>

  </table>

  </div>

  </figure>

  <h3>2. Add it to your New Relic config.</h3>

  <p>Paste the followig in your <code>newrelic.yml</code> config file.</p>

  <figure class="code">

  <div class="highlight">

  <table>

  <tbody>

  <tr>

  <td class="gutter">

  <pre class="line-numbers"><span class="line-number">1</span>

  </pre>

  </td>

  <td class="code">

  <pre><code class="ruby"><span class="line"><span class="ss">dispatcher</span><span class="p"><span class="symbol">:</span></span> <span class="s1"><span class="string">'puma'</span></span>

  </span></code></pre>

  </td>

  </tr>

  </tbody>

  </table>

  </div>

  </figure>

  <p>There, two easy steps and it’s all better.</p>

  <p>See you next time !</p>

  <p><!--HubSpot Call-to-Action Code --><span class="hs-cta-wrapper" id="hs-cta-wrapper-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2"><span class="hs-cta-node hs-cta-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2" id="hs-cta-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2"><!--[if lte IE 8]><div id="hs-cta-ie-element"></div><![endif]--><a href="https://cta-redirect.hubspot.com/cta/redirect/1684659/fb3606cc-cc1b-47d0-ae85-2c9f69837fe2" target="_blank"><img class="hs-cta-img" id="hs-cta-img-fb3606cc-cc1b-47d0-ae85-2c9f69837fe2" style="border-width:0px;" src="https://no-cache.hubspot.com/cta/default/1684659/fb3606cc-cc1b-47d0-ae85-2c9f69837fe2.png" alt="New Call-to-action"></a></span></span><!-- end HubSpot Call-to-Action Code --></p>

  <div id="disqus_thread">&nbsp;</div>
tags:
  - label: Under the hood
    value: under-the-hood
